var initMap=function(){var t=new google.maps.StyledMapType([{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{color:"#d66853"},{visibility:"on"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{color:"#d66853"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}]),e=new google.maps.Map(document.getElementById("map"),{zoom:4,center:{lat:40.23749160782123,lng:-99.0282608032226},mapTypeId:"terrain"});e.mapTypes.set("styled_map",t),e.setMapTypeId("styled_map");var s,r=[{distance:926012.399999998,time:131247.466,maxSpeed:18.6800003051758,avgHeartRate:144.700623195176,maxHeartRate:208},{distance:128048.42,time:116400.726,maxSpeed:5.20699977874756,avgHeartRate:115.144990298428,maxHeartRate:179},{distance:84153.7499999999,time:32717.238,maxSpeed:4.55299997329712,avgHeartRate:168.410996001557,maxHeartRate:192},{distance:13755.61,time:19232.401,maxSpeed:6.15799999237061,avgHeartRate:101.564293142598,maxHeartRate:175}],n=["33658A","DD5658","49306B","499F68"],o=[""],a=[],l=[],h=[],o=[];$.getJSON("/assests/data/output.json",function(t){function i(t,e,i){l.forEach(function(t,e){e!=i.id&&t.setOptions({strokeWeight:1,strokeOpacity:.4})}),e.setOptions({strokeWeight:5}),h.forEach(function(t,e){e!=i.id&&t.setVisible(!1)}),o.forEach(function(t,e){e!=i.id&&t.setVisible(!1)}),d(i)}function c(t,e,i){l.forEach(function(t,e){t.setOptions({strokeWeight:2,strokeOpacity:1})}),h.forEach(function(t,e){t.setVisible(!0)}),o.forEach(function(t,e){t.setVisible(!0)}),u()}function u(){var t={distance:0,time:0,avgSpeed:0,maxSpeed:0,avgHeartRate:0,maxHeartRate:0},e=[];$(".map-icon-cell").each(function(i,n){$(this).hasClass("active")&&(t.distance+=r[i].distance,t.time+=r[i].time,t.maxSpeed=Math.max(t.maxSpeed,r[i].maxSpeed),t.avgHeartRate+=r[i].time*r[i].avgHeartRate,t.maxHeartRate=Math.max(t.maxHeartRate,r[i].maxHeartRate),e.push(i))}),a.forEach(function(t,i){-1!=e.indexOf(t.activityID-1)?(l[i].setOptions({strokeWeight:2}),h[i].setVisible(!0),o[i].setVisible(!0)):(l[i].setOptions({strokeWeight:0}),h[i].setVisible(!1),o[i].setVisible(!1))}),t.avgSpeed=0==t.distance?0:t.distance/t.time,t.avgHeartRate=0==t.avgHeartRate?0:t.avgHeartRate/t.time,d(t)}function d(t){$("#detail-distance").text(Math.round(100*t.distance*621371e-9)/100),$("#detail-time").text(Math.round(100*t.time/60/60)/100),0==t.time?$("#detail-avgSpeed").text(0):$("#detail-avgSpeed").text(Math.round(100*(621371e-9*t.distance)/(t.time/60/60))/100),$("#detail-maxSpeed").text(Math.round(100*t.maxSpeed*2.23694)/100),$("#detail-avgHeartRate").text(Math.round(100*t.avgHeartRate)/100),$("#detail-maxHeartRate").text(Math.round(100*t.maxHeartRate)/100)}s=t.mapping,s.forEach(function(t,r){t.workouts.forEach(function(t,s){var u=new google.maps.Polyline({path:t.points,geodesic:!0,strokeColor:"#"+n[r],strokeOpacity:1,strokeWeight:2,map:e});l.push(u),a.push(t),u.addListener("mouseover",function(e){i(e,this,t)}),u.addListener("mouseout",function(e){c(e,this,t)});var d=new google.maps.Marker({icon:"http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|"+n[r],position:t.points[0],map:e,title:"Start"});h.push(d),d.addListener("mouseover",function(e){i(e,u,t)}),d.addListener("mouseout",function(e){c(e,u,t)});var f=new google.maps.Marker({icon:"http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|"+n[r],position:t.points[t.points.length-1],map:e,title:"End"});o.push(f),f.addListener("mouseover",function(e){i(e,u,t)}),f.addListener("mouseout",function(e){c(e,u,t)})})}),$(".map-icon-cell").on("click",function(t){if($(this).hasClass("active")){$(this).removeClass("active");$(this).attr("id")}else $(this).addClass("active");u()})})};