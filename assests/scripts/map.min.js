var initMap=function(){var e=new google.maps.StyledMapType([{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{color:"#d66853"},{visibility:"on"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{color:"#d66853"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}]),t=new google.maps.Map(document.getElementById("map"),{zoom:4,center:{lat:40.23749160782123,lng:-99.0282608032226},mapTypeId:"terrain"});t.mapTypes.set("styled_map",e),t.setMapTypeId("styled_map");var o,i=[{distance:926012.399999998,time:131247.466,maxSpeed:18.6800003051758,avgHeartRate:144.700623195176,maxHeartRate:208},{distance:128048.42,time:116400.726,maxSpeed:5.20699977874756,avgHeartRate:115.144990298428,maxHeartRate:179},{distance:84153.7499999999,time:32717.238,maxSpeed:4.55299997329712,avgHeartRate:168.410996001557,maxHeartRate:192},{distance:13755.61,time:19232.401,maxSpeed:6.15799999237061,avgHeartRate:101.564293142598,maxHeartRate:175}],n=["33658A","DD5658","49306B","499F68"],a=[""],l=[],s=[],f=[],a=[];$.getJSON("/assests/data/output.json",function(e){function r(e,t,r){s.forEach(function(e,t){t!=r.id&&e.setOptions({strokeWeight:1,strokeOpacity:.4})}),t.setOptions({strokeWeight:5}),f.forEach(function(e,t){t!=r.id&&e.setVisible(!1)}),a.forEach(function(e,t){t!=r.id&&e.setVisible(!1)}),h(r)}function u(e,t,r){s.forEach(function(e,t){e.setOptions({strokeWeight:2,strokeOpacity:1})}),f.forEach(function(e,t){e.setVisible(!0)}),a.forEach(function(e,t){e.setVisible(!0)}),c()}function c(){var e={distance:0,time:0,avgSpeed:0,maxSpeed:0,avgHeartRate:0,maxHeartRate:0},t=[];$(".map-icon-cell").each(function(r,n){$(this).hasClass("active")&&(e.distance+=i[r].distance,e.time+=i[r].time,e.maxSpeed=Math.max(e.maxSpeed,i[r].maxSpeed),e.avgHeartRate+=i[r].time*i[r].avgHeartRate,e.maxHeartRate=Math.max(e.maxHeartRate,i[r].maxHeartRate),t.push(r))}),l.forEach(function(e,r){-1!=t.indexOf(e.activityID-1)?(s[r].setOptions({strokeWeight:2}),f[r].setVisible(!0),a[r].setVisible(!0)):(s[r].setOptions({strokeWeight:0}),f[r].setVisible(!1),a[r].setVisible(!1))}),e.avgSpeed=0==e.distance?0:e.distance/e.time,e.avgHeartRate=0==e.avgHeartRate?0:e.avgHeartRate/e.time,h(e)}function h(e){$("#detail-distance").text(Math.round(100*e.distance*621371e-9)/100),$("#detail-time").text(Math.round(100*e.time/60/60)/100),0==e.time?$("#detail-avgSpeed").text(0):$("#detail-avgSpeed").text(Math.round(100*(621371e-9*e.distance)/(e.time/60/60))/100),$("#detail-maxSpeed").text(Math.round(100*e.maxSpeed*2.23694)/100),$("#detail-avgHeartRate").text(Math.round(100*e.avgHeartRate)/100),$("#detail-maxHeartRate").text(Math.round(100*e.maxHeartRate)/100)}o=e.mapping,o.forEach(function(e,i){e.workouts.forEach(function(e,o){var c=new google.maps.Polyline({path:e.points,geodesic:!0,strokeColor:"#"+n[i],strokeOpacity:1,strokeWeight:2,map:t});s.push(c),l.push(e),c.addListener("mouseover",function(t){r(t,this,e)}),c.addListener("mouseout",function(t){u(t,this,e)});var h=new google.maps.Marker({icon:"http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|"+n[i],position:e.points[0],map:t,title:"Start"});f.push(h),h.addListener("mouseover",function(t){r(t,c,e)}),h.addListener("mouseout",function(t){u(t,c,e)});var d=new google.maps.Marker({icon:"http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|"+n[i],position:e.points[e.points.length-1],map:t,title:"End"});a.push(d),d.addListener("mouseover",function(t){r(t,c,e)}),d.addListener("mouseout",function(t){u(t,c,e)})})}),$(".map-icon-cell").on("click",function(e){if($(this).hasClass("active")){$(this).removeClass("active");$(this).attr("id")}else $(this).addClass("active");c()})})};