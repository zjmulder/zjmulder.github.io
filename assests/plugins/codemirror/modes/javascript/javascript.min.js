!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(t){"use strict";function e(t,e,i){return/^(?:operator|sof|keyword c|case|new|[\[{}\(,;:]|=>)$/.test(e.lastType)||"quasi"==e.lastType&&/\{\s*$/.test(t.string.slice(0,t.pos-(i||0)))}t.defineMode("javascript",function(i,r){function f(t){for(var i,e=!1,r=!1;null!=(i=t.next());){if(!e){if("/"==i&&!r)return;"["==i?r=!0:r&&"]"==i&&(r=!1)}e=!e&&"\\"==i}}function m(t,e,i){return p=t,g=i,e}function v(t,i){var r=t.next();if('"'==r||"'"==r)return i.tokenize=y(r),i.tokenize(t,i);if("."==r&&t.match(/^\d+(?:[eE][+\-]?\d+)?/))return m("number","number");if("."==r&&t.match(".."))return m("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return m(r);if("="==r&&t.eat(">"))return m("=>","operator");if("0"==r&&t.eat(/x/i))return t.eatWhile(/[\da-f]/i),m("number","number");if("0"==r&&t.eat(/o/i))return t.eatWhile(/[0-7]/i),m("number","number");if("0"==r&&t.eat(/b/i))return t.eatWhile(/[01]/i),m("number","number");if(/\d/.test(r))return t.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),m("number","number");if("/"==r)return t.eat("*")?(i.tokenize=x,x(t,i)):t.eat("/")?(t.skipToEnd(),m("comment","comment")):e(t,i,1)?(f(t),t.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/),m("regexp","string-2")):(t.eatWhile(u),m("operator","operator",t.current()));if("`"==r)return i.tokenize=b,b(t,i);if("#"==r)return t.skipToEnd(),m("error","error");if(u.test(r))return t.eatWhile(u),m("operator","operator",t.current());if(h.test(r)){t.eatWhile(h);var n=t.current(),o=c.propertyIsEnumerable(n)&&c[n];return o&&"."!=i.lastType?m(o.type,o.style,n):m("variable","variable",n)}}function y(t){return function(e,i){var n,r=!1;if(s&&"@"==e.peek()&&e.match(d))return i.tokenize=v,m("jsonld-keyword","meta");for(;null!=(n=e.next())&&(n!=t||r);)r=!r&&"\\"==n;return r||(i.tokenize=v),m("string","string")}}function x(t,e){for(var r,i=!1;r=t.next();){if("/"==r&&i){e.tokenize=v;break}i="*"==r}return m("comment","comment")}function b(t,e){for(var r,i=!1;null!=(r=t.next());){if(!i&&("`"==r||"$"==r&&t.eat("{"))){e.tokenize=v;break}i=!i&&"\\"==r}return m("quasi","string-2",t.current())}function k(t,e){e.fatArrowAt&&(e.fatArrowAt=null);var i=t.string.indexOf("=>",t.start);if(!(0>i)){for(var r=0,n=!1,o=i-1;o>=0;--o){var s=t.string.charAt(o),a=w.indexOf(s);if(a>=0&&3>a){if(!r){++o;break}if(0==--r){"("==s&&(n=!0);break}}else if(a>=3&&6>a)++r;else if(h.test(s))n=!0;else{if(/["'\/]/.test(s))return;if(n&&!r){++o;break}}}n&&!r&&(e.fatArrowAt=o)}}function S(t,e,i,r,n,o){this.indented=t,this.column=e,this.type=i,this.prev=n,this.info=o,null!=r&&(this.align=r)}function A(t,e){for(var i=t.localVars;i;i=i.next)if(i.name==e)return!0;for(var r=t.context;r;r=r.prev)for(var i=r.vars;i;i=i.next)if(i.name==e)return!0}function T(t,e,i,r,n){var o=t.cc;for(M.state=t,M.stream=n,M.marked=null,M.cc=o,M.style=e,t.lexical.hasOwnProperty("align")||(t.lexical.align=!0);;){var s=o.length?o.pop():a?F:N;if(s(i,r)){for(;o.length&&o[o.length-1].lex;)o.pop()();return M.marked?M.marked:"variable"==i&&A(t,r)?"variable-2":e}}}function L(){for(var t=arguments.length-1;t>=0;t--)M.cc.push(arguments[t])}function P(){return L.apply(null,arguments),!0}function E(t){function e(e){for(var i=e;i;i=i.next)if(i.name==t)return!0;return!1}var i=M.state;if(M.marked="def",i.context){if(e(i.localVars))return;i.localVars={name:t,next:i.localVars}}else{if(e(i.globalVars))return;r.globalVars&&(i.globalVars={name:t,next:i.globalVars})}}function B(){M.state.context={prev:M.state.context,vars:M.state.localVars},M.state.localVars=D}function z(){M.state.localVars=M.state.context.vars,M.state.context=M.state.context.prev}function I(t,e){var i=function(){var i=M.state,r=i.indented;if("stat"==i.lexical.type)r=i.lexical.indented;else for(var n=i.lexical;n&&")"==n.type&&n.align;n=n.prev)r=n.indented;i.lexical=new S(r,M.stream.column(),t,null,i.lexical,e)};return i.lex=!0,i}function O(){var t=M.state;t.lexical.prev&&(")"==t.lexical.type&&(t.indented=t.lexical.indented),t.lexical=t.lexical.prev)}function R(t){function e(i){return i==t?P():";"==t?L():P(e)}return e}function N(t,e){return"var"==t?P(I("vardef",e.length),pt,R(";"),O):"keyword a"==t?P(I("form"),H,N,O):"keyword b"==t?P(I("form"),N,O):"{"==t?P(I("}"),st,O):";"==t?P():"if"==t?("else"==M.state.lexical.info&&M.state.cc[M.state.cc.length-1]==O&&M.state.cc.pop()(),P(I("form"),H,N,O,xt)):"function"==t?P(At):"for"==t?P(I("form"),bt,N,O):"variable"==t?P(I("stat"),J):"switch"==t?P(I("form"),H,I("}","switch"),R("{"),st,O,O):"case"==t?P(F,R(":")):"default"==t?P(R(":")):"catch"==t?P(I("form"),B,R("("),Tt,R(")"),N,O,z):"class"==t?P(I("form"),Mt,O):"export"==t?P(I("stat"),Dt,O):"import"==t?P(I("stat"),Bt,O):"module"==t?P(I("form"),gt,I("}"),R("{"),st,O,O):"type"==t?P(ht,R("operator"),ht,R(";")):"async"==t?P(N):L(I("stat"),F,R(";"),O)}function F(t){return V(t,!1)}function W(t){return V(t,!0)}function H(t){return"("!=t?L():P(I(")"),F,R(")"),O)}function V(t,e){if(M.state.fatArrowAt==M.stream.start){var i=e?q:_;if("("==t)return P(B,I(")"),nt(gt,")"),O,R("=>"),i,z);if("variable"==t)return L(B,gt,R("=>"),i,z)}var r=e?j:Y;return C.hasOwnProperty(t)?P(r):"function"==t?P(At,r):"keyword c"==t||"async"==t?P(e?X:G):"("==t?P(I(")"),G,R(")"),O,r):"operator"==t||"spread"==t?P(e?W:F):"["==t?P(I("]"),Rt,O,r):"{"==t?ot(et,"}",null,r):"quasi"==t?L(U,r):"new"==t?P(K(e)):P()}function G(t){return t.match(/[;\}\)\],]/)?L():L(F)}function X(t){return t.match(/[;\}\)\],]/)?L():L(W)}function Y(t,e){return","==t?P(F):j(t,e,!1)}function j(t,e,i){var r=0==i?Y:j,n=0==i?F:W;return"=>"==t?P(B,i?q:_,z):"operator"==t?/\+\+|--/.test(e)?P(r):"?"==e?P(F,R(":"),n):P(n):"quasi"==t?L(U,r):";"!=t?"("==t?ot(W,")","call",r):"."==t?P(tt,r):"["==t?P(I("]"),G,R("]"),O,r):void 0:void 0}function U(t,e){return"quasi"!=t?L():"${"!=e.slice(e.length-2)?P(U):P(F,$)}function $(t){return"}"==t?(M.marked="string-2",M.state.tokenize=b,P(U)):void 0}function _(t){return k(M.stream,M.state),L("{"==t?N:F)}function q(t){return k(M.stream,M.state),L("{"==t?N:W)}function K(t){return function(e){return"."==e?P(t?Q:Z):L(t?W:F)}}function Z(t,e){return"target"==e?(M.marked="keyword",P(Y)):void 0}function Q(t,e){return"target"==e?(M.marked="keyword",P(j)):void 0}function J(t){return":"==t?P(O,N):L(Y,R(";"),O)}function tt(t){return"variable"==t?(M.marked="property",P()):void 0}function et(t,e){return"async"==t?(M.marked="property",P(et)):"variable"==t||"keyword"==M.style?(M.marked="property",P("get"==e||"set"==e?it:rt)):"number"==t||"string"==t?(M.marked=s?"property":M.style+" property",P(rt)):"jsonld-keyword"==t?P(rt):"modifier"==t?P(et):"["==t?P(F,R("]"),rt):"spread"==t?P(F):":"==t?L(rt):void 0}function it(t){return"variable"!=t?L(rt):(M.marked="property",P(At))}function rt(t){return":"==t?P(W):"("==t?L(At):void 0}function nt(t,e){function i(r,n){if(","==r){var o=M.state.lexical;return"call"==o.info&&(o.pos=(o.pos||0)+1),P(function(i,r){return i==e||r==e?L():L(t)},i)}return r==e||n==e?P():P(R(e))}return function(r,n){return r==e||n==e?P():L(t,i)}}function ot(t,e,i){for(var r=3;r<arguments.length;r++)M.cc.push(arguments[r]);return P(I(e,i),nt(t,e),O)}function st(t){return"}"==t?P():L(N,st)}function at(t,e){if(l){if(":"==t)return P(ht);if("?"==e)return P(at)}}function lt(t,e){return"="==e?P(W):void 0}function ht(t){return"variable"==t?(M.marked="variable-3",P(ft)):"{"==t?P(nt(ut,"}")):"("==t?P(nt(dt,")"),ct):void 0}function ct(t){return"=>"==t?P(ht):void 0}function ut(t){return"variable"==t||"keyword"==M.style?(M.marked="property",P(ut)):":"==t?P(ht):void 0}function dt(t){return"variable"==t?P(dt):":"==t?P(ht):void 0}function ft(t,e){return"<"==e?P(nt(ht,">"),ft):"["==t?P(R("]"),ft):void 0}function pt(){return L(gt,at,vt,yt)}function gt(t,e){return"modifier"==t?P(gt):"variable"==t?(E(e),P()):"spread"==t?P(gt):"["==t?ot(gt,"]"):"{"==t?ot(mt,"}"):void 0}function mt(t,e){return"variable"!=t||M.stream.match(/^\s*:/,!1)?("variable"==t&&(M.marked="property"),"spread"==t?P(gt):"}"==t?L():P(R(":"),gt,vt)):(E(e),P(vt))}function vt(t,e){return"="==e?P(W):void 0}function yt(t){return","==t?P(pt):void 0}function xt(t,e){return"keyword b"==t&&"else"==e?P(I("form","else"),N,O):void 0}function bt(t){return"("==t?P(I(")"),wt,R(")"),O):void 0}function wt(t){return"var"==t?P(pt,R(";"),Ct):";"==t?P(Ct):"variable"==t?P(kt):L(F,R(";"),Ct)}function kt(t,e){return"in"==e||"of"==e?(M.marked="keyword",P(F)):P(Y,Ct)}function Ct(t,e){return";"==t?P(St):"in"==e||"of"==e?(M.marked="keyword",P(F)):L(F,R(";"),St)}function St(t){")"!=t&&P(F)}function At(t,e){return"*"==e?(M.marked="keyword",P(At)):"variable"==t?(E(e),P(At)):"("==t?P(B,I(")"),nt(Tt,")"),O,at,N,z):void 0}function Tt(t){return"spread"==t?P(Tt):L(gt,at,lt)}function Mt(t,e){return"variable"==t?(E(e),P(Lt)):void 0}function Lt(t,e){return"extends"==e?P(l?ht:F,Lt):"{"==t?P(I("}"),Pt,O):void 0}function Pt(t,e){return"variable"==t||"keyword"==M.style?("static"==e||"get"==e||"set"==e||l&&("public"==e||"private"==e||"protected"==e))&&M.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(M.marked="keyword",P(Pt)):(M.marked="property",P(l?Et:At,Pt)):"*"==e?(M.marked="keyword",P(Pt)):";"==t?P(Pt):"}"==t?P():void 0}function Et(t){return":"==t?P(ht):L(At)}function Dt(t,e){return"*"==e?(M.marked="keyword",P(Ot,R(";"))):"default"==e?(M.marked="keyword",P(F,R(";"))):L(N)}function Bt(t){return"string"==t?P():L(zt,Ot)}function zt(t,e){return"{"==t?ot(zt,"}"):("variable"==t&&E(e),"*"==e&&(M.marked="keyword"),P(It))}function It(t,e){return"as"==e?(M.marked="keyword",P(zt)):void 0}function Ot(t,e){return"from"==e?(M.marked="keyword",P(F)):void 0}function Rt(t){return"]"==t?P():L(nt(W,"]"))}function Nt(t,e){return"operator"==t.lastType||","==t.lastType||u.test(e.charAt(0))||/[,.]/.test(e.charAt(0))}var p,g,n=i.indentUnit,o=r.statementIndent,s=r.jsonld,a=r.json||s,l=r.typescript,h=r.wordCharacters||/[\w$\xa1-\uffff]/,c=function(){function t(t){return{type:t,style:"keyword"}}var e=t("keyword a"),i=t("keyword b"),r=t("keyword c"),n=t("operator"),o={type:"atom",style:"atom"},s={"if":t("if"),"while":e,"with":e,"else":i,"do":i,"try":i,"finally":i,"return":r,"break":r,"continue":r,"new":t("new"),"delete":r,"throw":r,"debugger":r,"var":t("var"),"const":t("var"),let:t("var"),"function":t("function"),"catch":t("catch"),"for":t("for"),"switch":t("switch"),"case":t("case"),"default":t("default"),"in":n,"typeof":n,"instanceof":n,"true":o,"false":o,"null":o,undefined:o,NaN:o,Infinity:o,"this":t("this"),"class":t("class"),"super":t("atom"),"yield":r,"export":t("export"),"import":t("import"),"extends":r,await:r,async:t("async")};if(l){var a={type:"variable",style:"variable-3"},h={"interface":t("class"),"implements":r,namespace:r,module:t("module"),"enum":t("module"),type:t("type"),"public":t("modifier"),"private":t("modifier"),"protected":t("modifier"),"abstract":t("modifier"),as:n,string:a,number:a,"boolean":a,any:a};for(var c in h)s[c]=h[c]}return s}(),u=/[+\-*&%=<>!?|~^]/,d=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,w="([{}])",C={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},M={state:null,column:null,marked:null,cc:null},D={name:"this",next:{name:"arguments"}};return O.lex=!0,{startState:function(t){var e={tokenize:v,lastType:"sof",cc:[],lexical:new S((t||0)-n,0,"block",!1),localVars:r.localVars,context:r.localVars&&{vars:r.localVars},indented:t||0};return r.globalVars&&"object"==typeof r.globalVars&&(e.globalVars=r.globalVars),e},token:function(t,e){if(t.sol()&&(e.lexical.hasOwnProperty("align")||(e.lexical.align=!1),e.indented=t.indentation(),k(t,e)),e.tokenize!=x&&t.eatSpace())return null;var i=e.tokenize(t,e);return"comment"==p?i:(e.lastType="operator"!=p||"++"!=g&&"--"!=g?p:"incdec",T(e,i,p,g,t))},indent:function(e,i){if(e.tokenize==x)return t.Pass;if(e.tokenize!=v)return 0;var l,s=i&&i.charAt(0),a=e.lexical;if(!/^\s*else\b/.test(i))for(var h=e.cc.length-1;h>=0;--h){var c=e.cc[h];if(c==O)a=a.prev;else if(c!=xt)break}for(;("stat"==a.type||"form"==a.type)&&("}"==s||(l=e.cc[e.cc.length-1])&&(l==Y||l==j)&&!/^[,\.=+\-*:?[\(]/.test(i));)a=a.prev;o&&")"==a.type&&"stat"==a.prev.type&&(a=a.prev);var u=a.type,d=s==u;return"vardef"==u?a.indented+("operator"==e.lastType||","==e.lastType?a.info+1:0):"form"==u&&"{"==s?a.indented:"form"==u?a.indented+n:"stat"==u?a.indented+(Nt(e,i)?o||n:0):"switch"!=a.info||d||0==r.doubleIndentSwitch?a.align?a.column+(d?0:1):a.indented+(d?0:n):a.indented+(/^(?:case|default)\b/.test(i)?n:2*n)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:a?null:"/*",blockCommentEnd:a?null:"*/",lineComment:a?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:a?"json":"javascript",jsonldMode:s,jsonMode:a,expressionAllowed:e,skipExpression:function(t){var e=t.cc[t.cc.length-1];(e==F||e==W)&&t.cc.pop()}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})});